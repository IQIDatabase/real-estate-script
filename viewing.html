<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Viewing Request Card Generator</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #f5f6f8;
            padding: 16px;
            margin: 0;
        }

        .container {
            max-width: 520px;
            width: 100%;
            flex-direction: column;
            margin: auto;
            background: #fff;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        }

        h2 {
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-top: 12px;
            font-weight: 600;
        }

        input,
        textarea {
            width: 100%;
            margin-top: 6px;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 14px;
            box-sizing: border-box;
        }

        textarea {
            resize: vertical;
        }

        button {
            margin-top: 16px;
            padding: 14px;
            width: 100%;
            border: none;
            border-radius: 10px;
            background: #3b82f6;
            color: #fff;
            font-size: 16px;
            cursor: pointer;
        }

        button:hover {
            background: #2563eb;
        }

        .top {
            display: flex;
            gap: 12px;
            width: 100%;
        }

        .left,
        .right {
            width: 100%;
        }

        .card {
            margin-top: 24px;
            padding: 16px;
            border-radius: 12px;
            background: #f9fafb;
            border: 1px dashed #cbd5e1;
            cursor: pointer;
            white-space: pre-line;
            font-size: 14px;
        }

        .hint {
            font-size: 12px;
            color: #64748b;
            margin-top: 6px;
            text-align: center;
        }

        /* ðŸ“± Mobile responsiveness */
        @media (max-width: 480px) {
            .top {
                flex-direction: column;
                gap: 0;
            }

            h2 {
                font-size: 18px;
                text-align: center;
            }

            button {
                font-size: 15px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="index.html" style="
          text-align: center;
          align-items: center;
          background-color: #068fff;
          color: white;
          text-decoration: none;
          padding: 5px 40px;
          border-radius: 50px;
        ">
            Script
        </a>
        <h2>Viewing Request Generator</h2>
        <div class="top">
            <div class="left">
                <label>Building</label>
                <input id="building" placeholder="Bellagio" />
            </div>

            <div class="right">
                <label>Unit (BR)</label>
                <input id="unit" placeholder="2" />
            </div>
        </div>
        <div class="top">
            <div class="left">
                <label>Date</label>
                <input id="date" type="date" />
            </div>
            <div class="right">
                <label>Time</label>
                <input id="time" type="time" />
            </div>
        </div>

        <label>Client Details</label>
        <textarea id="client" rows="3" placeholder="Name: Tom"></textarea>
        <label>Owner Number</label>
        <input id="owner" />

        <button onclick="generate()">Generate Card</button>

        <div id="card" class="card" onclick="copyCard()" style="display: none"></div>
        <div class="hint" id="hint" style="display: none">
            Click the card to copy
        </div>
    </div>

    <script>
        function getGreeting() {
            const hour = new Date().getHours(); // gets the hour (0-23)

            if (hour < 12) return "Good morning";
            if (hour < 18) return "Good afternoon";
            return "Good evening";
        }

        function formatDate(value) {
            if (!value) return "";
            const d = new Date(value);
            return d.toLocaleDateString("en-US", {
                month: "short",
                day: "numeric",
                year: "numeric",
            });
        }
        window.addEventListener("DOMContentLoaded", () => {
            document.getElementById("time").value = "01:00";
        });
        function generate() {
            const building = titleCase(
                document.getElementById("building").value,
            ).trim();
            let unit = document.getElementById("unit").value.trim();
            unit = unit.toLowerCase()=="studio"?"Studio":unit+"BR"
            const date = document.getElementById("date").value.trim();
            const time = formatTime12(document.getElementById("time").value.trim());
            const client = document.getElementById("client").value.trim();
            const owner = converter_number(
                document.getElementById("owner").value.trim(),
            );
            if (
                building == "" ||
                unit == "" ||
                date == "" ||
                time == "" ||
                client == ""
            ) {
                alert("Input Details");
                return;
            }
            let day =new Date(date).toLocaleDateString("en-US", {
                weekday: "long"
            });

            const greeting = getGreeting(time);

            let current_date = new Date(diff_days())
            let possible_date = new Date(date)
            let diff = (possible_date-current_date) / (1000 * 60 * 60 * 24);
            if(diff>1 && diff<2){
                day ="Tomorrow"
            }


            const text = `${greeting}! I would like to kindly request a viewing schedule for your ${unit} unit at ${building} with the following details:\n\n*Viewing Request:*\nDate: ${formatDate(date)} (${day})\nTime: ${time}\n\n*Client Details:*\n${client}\n\n*Assisting agent:*\nMs. Jen\n\nThank you very much, and I look forward to your confirmation. Thank you â˜ºï¸`;
            document.getElementById("owner").value = owner;
            const card = document.getElementById("card");
            card.textContent = text;
            card.style.display = "block";
            document.getElementById("hint").style.display = "block";
        }
        function titleCase(str) {
            return str.toLowerCase().replace(/\b\w/g, (c) => c.toUpperCase());
        }
        function converter_number(number) {
            val = number.toString().replace(new RegExp(" ", "g"), "").trim();
            let convert;
            if (val.length == 9) {
                convert = BigInt(`0x${val}`).toString(10);
                convert = convert.padStart(11, "0");
                convert = convert.replace(/^(\d{4})(\d{3})(\d{4})$/, "$1 $2 $3");

                return convert;
            } else {
                return number;
            }
        }
function diff_days(){
    let date = new Date()
    let current =  new Date(
        date.getFullYear(),
        date.getMonth(),
        date.getDate()

    )
    return current
}
        function copyCard() {
            const text = document.getElementById("card").textContent;
            navigator.clipboard.writeText(text);
            document.getElementById("hint").textContent = "Copied to clipboard âœ”";
        }
        function formatTime12(time) {
            if (!time) return "";
            let [hour, minute] = time.split(":");
            hour = parseInt(hour, 10);

            const ampm = hour >= 12 ? "PM" : "AM";
            hour = hour % 12 || 12;

            return `${hour}:${minute} ${ampm}`;
        }
    </script>
</body>

</html>
